<!DOCTYPE html>
<html lang="en">
<!-----------------------------------------=HEAD=------------------------------------------------------->

<head>
    <title>Editar producto</title>
    <%- include ('../partials/head') %>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/css/stylesABMProduct.css">
</head>
<!-----------------------------------------=HEADER=----------------------------------------------------->

<body>
    <%- include ('../partials/header') %>
        <main>
            <section class="formularioedit">
                <form action="/admin/edit/<%= Product.id%>?_method=PUT" method="POST" enctype="multipart/form-data">
                    <h5>FORMULARIO DE EDICIÓN DE PRODUCTOS:</h5>
                    <label class="col-sm-3 col-form-label is-required" for="name" required><span>
                            Nombre:</span></label>
                    <input type="text" id="name" name="name" value="<%= Product.name %>" required>
                    <div class= 'aviso-error1'></div>

                    <label class="col-sm-3 col-form-label is-required" for="bodega"><span>Marca: </span></label>
                    <input type="text" id="bodega" name="brand" value="<%= Product.brand %>">
                    <div class= 'aviso-error2'></div>

                    <label class="col-sm-3 col-form-label is-required" for="price"><span>
                            Precio</span></label>
                    <input type="text" id="price" name="price" value="<%= Product.price %>" required>
                    <div class= 'aviso-error3'></div>

                    <label class="col-sm-3 col-form-label is-required" for="description" id="description"
                        required><span>Descipción:</span></label>
                    <textarea name="description" id="description"><%= Product.description %></textarea>
                    <div class= 'aviso-error4'></div>

                    <label class="col-sm-3 col-form-label is-required" for="stock"><span>Stock:</span></label>
                    <input type="text" id="stock" name="stock" value="<%= Product.stock %>">
                    <div class= 'aviso-error5'></div>

                    <label class="col-sm-3 col-form-label is-required" for="discount" required><span>
                            Descuento</span></label>
                    <input type="text" id="discount" name="discount" value="<%= Product.discount %>">
                    <div class= 'aviso-error6'></div>

                    <label class="col-sm-3 col-form-label is-required" for="category"><span>Categoría:</span></label>
                    <select name="category_id" id="category" required class="content-select2">
                        <option value="">Seleccione la categoría</option>
                        <% allCategories.forEach(category=> { %>
                            <option value="<%= category.id %>" <% if (Product.category.id==category.id) { %>
                                <%= 'selected' %>
                                    <% }; %>><%= category.name %>
                            </option>
                            <% }); %>
                    </select>
                    <div class= 'aviso-error7'></div>
                    

                    <label class="col-sm-3 col-form-label is-required"
                        for="subcategory"><span>SubCategoría:</span></label>
                    <select name="subcategory_id" id="subCategory_id" class="content-select2">
                        <option value="">Seleccione la Sub-Categoría</option>
                        <% allSubcategories.forEach(subcategory=> { %>
                            <option value="<%= subcategory.id %>" <% if (Product.subcategory.id==subcategory.id) { %>
                                <%= 'selected' %>
                                    <% }; %>><%= subcategory.name %>
                            </option>
                            <% }); %>
                    </select>
                    <div class= 'aviso-error8'></div>

                    <label class="col-sm-3 col-form-label is-required" for="subcategory"><span>Variedad:</span></label>
                    <select name="variety_id" id="variedad" class="content-select2">
                        <option value="">Seleccione una variedad</option>
                        <% allVarieties.forEach(variety=> { %>
                            <option value="<%= variety.id %>" <% if (Product.variety.id==variety.id) { %>
                                <%= 'selected' %>
                                    <% }; %>><%= variety.name %>
                            </option>
                            <% }); %>
                    </select>
                    <div class= 'aviso-error9'></div>
                    <!-- <label class="col-sm-3 col-form-label is-required" for="anio"><span>Año:</span></label>
                    <input type="text" id="anio" name="anio"> -->
                    <br>
                    <!--Aquí solicito la imagen-->
                    <div>
                        <figure>
                            <img class="img-view" src="/images/<%= Product.image%>" alt="bebida <%= Product.name%>">
                        </figure>
                        <input type="hidden" name="oldImagen" value="<%= Product.image%>">
                        <!--De esta forma logro conservar y que viaje la imagen anterior de esta forma evito que el usuario seleccione una imagen nuevamente, ( si no lo desea) -->
                        <input type="file" name="image">

                    </div>

                    <br>
                    <br>
                    <p>
                        <button type="submit" class="button2">Editar</button>
                        <button class="button2"><a class="volver" href="/admin/administrar">Volver</a></button>
                    </p>

                    </div>
                </form>
            </section>
        </main>
        <script src = "/js/productsValidator.js"></script>
</body>
</html>